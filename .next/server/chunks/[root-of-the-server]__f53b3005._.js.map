{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/backend/db.js"],"sourcesContent":["\nimport mysql from 'mysql2/promise';\nimport fs from 'fs';\nimport path from 'path';\nimport dotenv from 'dotenv';\n\n// Configure dotenv to load the .env file from the backend directory at module load time.\ndotenv.config({ path: path.resolve(process.cwd(), 'backend', '.env') });\n\nlet pool = null;\n\nasync function getDbPool() {\n  if (pool) {\n    return pool;\n  }\n\n  // --- Debugging Environment ---\n  console.log('[DB_INIT] Current working directory:', process.cwd());\n  console.log('[DB_INIT] Checking for environment variables...');\n  \n  try {\n    // Check for essential DB environment variables\n    const essentialEnvVars = ['DB_HOST', 'DB_USER', 'DB_PASSWORD', 'DB_NAME', 'JWT_SECRET'];\n    const missingEnvVars = [];\n    for (const v of essentialEnvVars) {\n        if (!process.env[v]) {\n            missingEnvVars.push(v);\n        } else {\n            // Avoid logging password in production\n            if (v !== 'DB_PASSWORD' && v !== 'JWT_SECRET') {\n                console.log(`[DB_INIT] Found ENV VAR: ${v} = ${process.env[v]}`);\n            } else {\n                 console.log(`[DB_INIT] Found ENV VAR: ${v} = (hidden)`);\n            }\n        }\n    }\n    \n    if (missingEnvVars.length > 0) {\n      const errorMsg = `Configuration is incomplete. Missing variables: ${missingEnvVars.join(', ')}. Please define these in your backend/.env file. For JWT_SECRET, use a long, random string.`;\n      console.error(`[DB_INIT_ERROR] ${errorMsg}`);\n      throw new Error(errorMsg);\n    }\n\n    // --- SSL Certificate Handling ---\n    const caCertPathOrContent = process.env.DB_SSL_CA;\n    let caCertContent;\n\n    if (caCertPathOrContent) {\n      const potentialPath = path.resolve(process.cwd(), caCertPathOrContent);\n      \n      if (fs.existsSync(potentialPath) && fs.statSync(potentialPath).isFile()) {\n        console.log(`DB_INIT_INFO: DB_SSL_CA points to a file. Reading certificate from \"${potentialPath}\".`);\n        caCertContent = fs.readFileSync(potentialPath, 'utf8');\n      } else {\n        console.log(\"DB_INIT_INFO: DB_SSL_CA does not appear to be a file path. Using its content directly for SSL connection.\");\n        caCertContent = caCertPathOrContent;\n      }\n    } else {\n      console.warn(`DB_WARN: The DB_SSL_CA environment variable is not set. Connecting with SSL using system default CAs. If connection fails, please provide the path to your 'ca.pem' file in the DB_SSL_CA variable in your .env file.`);\n    }\n    \n    const sslConfig = { rejectUnauthorized: true, ca: caCertContent || undefined };\n\n    // --- Connection Pool Creation ---\n    console.log(\"DB_INIT_INFO: Creating database connection pool for the first time.\");\n    const newPool = mysql.createPool({\n      host: process.env.DB_HOST,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD,\n      database: process.env.DB_NAME,\n      port: process.env.DB_PORT ? parseInt(process.env.DB_PORT, 10) : 3306,\n      ssl: sslConfig,\n      waitForConnections: true,\n      connectionLimit: 10,\n      queueLimit: 0,\n    });\n\n    try {\n      // Test the connection before assigning it to the singleton\n      const connection = await newPool.getConnection();\n      console.log(\"DB_INIT_SUCCESS: Database connection pool created and verified successfully.\");\n      connection.release();\n    } catch (testError) {\n      console.error(\"CRITICAL_DB_INIT_ERROR: Failed to get a connection from the pool after creation.\", testError);\n      // Destroy the pool if the initial connection test fails\n      newPool.end();\n      throw testError; // Re-throw to be caught by the main catch block\n    }\n\n    pool = newPool;\n    return pool;\n\n  } catch (error) {\n    console.error(`CRITICAL_DB_INIT_ERROR: Failed to create and verify database connection pool. Error: ${error.message}`);\n    // Re-throw the error to be caught by the calling API route\n    throw error;\n  }\n}\n\n// Export the function that provides the pool\nexport { getDbPool };\n"],"names":[],"mappings":";;;AACA;AACA;AACA;AACA;;;;;AAEA,yFAAyF;AACzF,uIAAA,CAAA,UAAM,CAAC,MAAM,CAAC;IAAE,MAAM,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,WAAW;AAAQ;AAErE,IAAI,OAAO;AAEX,eAAe;IACb,IAAI,MAAM;QACR,OAAO;IACT;IAEA,gCAAgC;IAChC,QAAQ,GAAG,CAAC,wCAAwC,QAAQ,GAAG;IAC/D,QAAQ,GAAG,CAAC;IAEZ,IAAI;QACF,+CAA+C;QAC/C,MAAM,mBAAmB;YAAC;YAAW;YAAW;YAAe;YAAW;SAAa;QACvF,MAAM,iBAAiB,EAAE;QACzB,KAAK,MAAM,KAAK,iBAAkB;YAC9B,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE,EAAE;gBACjB,eAAe,IAAI,CAAC;YACxB,OAAO;gBACH,uCAAuC;gBACvC,IAAI,MAAM,iBAAiB,MAAM,cAAc;oBAC3C,QAAQ,GAAG,CAAC,CAAC,yBAAyB,EAAE,EAAE,GAAG,EAAE,QAAQ,GAAG,CAAC,EAAE,EAAE;gBACnE,OAAO;oBACF,QAAQ,GAAG,CAAC,CAAC,yBAAyB,EAAE,EAAE,WAAW,CAAC;gBAC3D;YACJ;QACJ;QAEA,IAAI,eAAe,MAAM,GAAG,GAAG;YAC7B,MAAM,WAAW,CAAC,gDAAgD,EAAE,eAAe,IAAI,CAAC,MAAM,2FAA2F,CAAC;YAC1L,QAAQ,KAAK,CAAC,CAAC,gBAAgB,EAAE,UAAU;YAC3C,MAAM,IAAI,MAAM;QAClB;QAEA,mCAAmC;QACnC,MAAM,sBAAsB,QAAQ,GAAG,CAAC,SAAS;QACjD,IAAI;QAEJ,IAAI,qBAAqB;YACvB,MAAM,gBAAgB,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI;YAElD,IAAI,6FAAA,CAAA,UAAE,CAAC,UAAU,CAAC,kBAAkB,6FAAA,CAAA,UAAE,CAAC,QAAQ,CAAC,eAAe,MAAM,IAAI;gBACvE,QAAQ,GAAG,CAAC,CAAC,oEAAoE,EAAE,cAAc,EAAE,CAAC;gBACpG,gBAAgB,6FAAA,CAAA,UAAE,CAAC,YAAY,CAAC,eAAe;YACjD,OAAO;gBACL,QAAQ,GAAG,CAAC;gBACZ,gBAAgB;YAClB;QACF,OAAO;YACL,QAAQ,IAAI,CAAC,CAAC,qNAAqN,CAAC;QACtO;QAEA,MAAM,YAAY;YAAE,oBAAoB;YAAM,IAAI,iBAAiB;QAAU;QAE7E,mCAAmC;QACnC,QAAQ,GAAG,CAAC;QACZ,MAAM,UAAU,mIAAA,CAAA,UAAK,CAAC,UAAU,CAAC;YAC/B,MAAM,QAAQ,GAAG,CAAC,OAAO;YACzB,MAAM,QAAQ,GAAG,CAAC,OAAO;YACzB,UAAU,QAAQ,GAAG,CAAC,WAAW;YACjC,UAAU,QAAQ,GAAG,CAAC,OAAO;YAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,GAAG,SAAS,QAAQ,GAAG,CAAC,OAAO,EAAE,MAAM;YAChE,KAAK;YACL,oBAAoB;YACpB,iBAAiB;YACjB,YAAY;QACd;QAEA,IAAI;YACF,2DAA2D;YAC3D,MAAM,aAAa,MAAM,QAAQ,aAAa;YAC9C,QAAQ,GAAG,CAAC;YACZ,WAAW,OAAO;QACpB,EAAE,OAAO,WAAW;YAClB,QAAQ,KAAK,CAAC,oFAAoF;YAClG,wDAAwD;YACxD,QAAQ,GAAG;YACX,MAAM,WAAW,gDAAgD;QACnE;QAEA,OAAO;QACP,OAAO;IAET,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,qFAAqF,EAAE,MAAM,OAAO,EAAE;QACrH,2DAA2D;QAC3D,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/requisitions/route.ts"],"sourcesContent":["\nimport { NextResponse } from 'next/server';\nimport { getDbPool } from '../../../../backend/db.js';\nimport type { RequisitionPayload, RequisitionItem } from '@/types';\nimport { randomUUID } from 'crypto';\n\nconst safeToISOString = (dateValue: any): string | null => {\n  if (!dateValue) return null;\n  const dateObj = new Date(dateValue);\n  if (isNaN(dateObj.getTime())) {\n    console.warn(`[API WARN] Invalid date value encountered: ${dateValue}. Returning null.`);\n    return null;\n  }\n  return dateObj.toISOString();\n};\n\n\nexport async function POST(request: Request) {\n  let connection;\n  try {\n    const pool = await getDbPool();\n    const requisitionData = await request.json() as Omit<RequisitionPayload, 'totalEstimatedValue' | 'items' | 'status' | 'justification'> & { items: RequisitionItem[], status?: RequisitionPayload['status'], approverId?: string | null, siteId: number }; // siteId (header) is now expected to be number\n    \n    const generatedId = requisitionData.id || randomUUID();\n\n    // Validate header siteId\n    if (!requisitionData.siteId) {\n        return NextResponse.json({ error: 'Site/Department is required for the requisition header.' }, { status: 400 });\n    }\n    if (!requisitionData.requisitionNumber || !requisitionData.requisitionDate || !requisitionData.requestedByName) {\n        return NextResponse.json({ error: 'Missing required fields for requisition header (Req No, Date, Requested By).' }, { status: 400 });\n    }\n    if (!requisitionData.items || requisitionData.items.length === 0) {\n        return NextResponse.json({ error: 'Requisition must have at least one item.' }, { status: 400 });\n    }\n\n    connection = await pool.getConnection();\n    await connection.beginTransaction();\n\n    const statusToSave = requisitionData.approverId ? 'Pending Approval' : 'Draft';\n\n    // Header justification field removed from INSERT\n    await connection.execute(\n      `INSERT INTO Requisition (id, requisitionNumber, requisitionDate, requestedByUserId, requestedByName, siteId, status, approverId, createdAt, updatedAt)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())`, // justification removed\n      [\n        generatedId,\n        requisitionData.requisitionNumber,\n        new Date(requisitionData.requisitionDate).toISOString().slice(0, 19).replace('T', ' '),\n        requisitionData.requestedByUserId || null,\n        requisitionData.requestedByName,\n        Number(requisitionData.siteId), // Header siteId\n        statusToSave, \n        requisitionData.approverId || null, \n      ]\n    );\n\n    for (const item of requisitionData.items) {\n      if (!item.description || !item.quantity) { // Item-level justification is now in item.justification (mapped to DB notes column)\n          await connection.rollback();\n          return NextResponse.json({ error: `Item description and quantity are required. Item problematic: ${JSON.stringify(item)}` }, { status: 400 });\n      }\n      // Item siteId removed from INSERT\n      await connection.execute(\n        `INSERT INTO RequisitionItem (id, requisitionId, partNumber, description, categoryId, quantity, notes, createdAt, updatedAt)\n         VALUES (?, ?, ?, ?, ?, ?, ?, NOW(), NOW())`, // siteId removed, notes now stores item justification\n        [\n          item.id || randomUUID(),\n          generatedId, \n          item.partNumber, \n          item.description, \n          item.categoryId ? Number(item.categoryId) : null, \n          Number(item.quantity), \n          item.justification, // This was item.notes (renamed to justification in type, maps to 'notes' DB column)\n        ]\n      );\n    }\n\n    await connection.commit();\n    return NextResponse.json({ message: 'Requisition created successfully', requisitionId: generatedId, requisitionNumber: requisitionData.requisitionNumber, status: statusToSave }, { status: 201 });\n\n  } catch (error: any) {\n    if (connection) await connection.rollback();\n    console.error('[API_ERROR] /api/requisitions POST:', error);\n    \n    let errorMessage = 'Failed to create requisition.';\n    let statusCode = 500;\n    let errorDetails = error.message || 'An unknown database error occurred.';\n\n    if (error.code) {\n      switch (error.code) {\n        case 'ER_DUP_ENTRY':\n          errorMessage = 'Requisition with this ID or Number already exists.';\n          statusCode = 409;\n          break;\n        case 'ER_NO_REFERENCED_ROW_2':\n          let field = 'a related record';\n          const fkMatch = error.message.match(/FOREIGN KEY \\(`(\\w+)`\\)/);\n          if (fkMatch && fkMatch[1]) {\n              field = `field '${fkMatch[1]}'`;\n          } else if (error.message.includes('fk_requisition_site')) field = 'Site ID for requisition header';\n          else if (error.message.includes('fk_requisition_user')) field = 'Requested By User ID';\n          else if (error.message.includes('fk_requisition_approver')) field = 'Approver ID';\n          else if (error.message.includes('fk_reqitem_category')) field = 'Item Category ID';\n          errorMessage = `Invalid reference for ${field}. Please ensure the selected value exists.`;\n          statusCode = 400;\n          break;\n        case 'ER_BAD_NULL_ERROR':\n             errorMessage = `A required field was not provided or was invalid. Field: ${error.message.match(/Column '(\\w+)'/)?.[1] || 'unknown'}`;\n             statusCode = 400;\n             break;\n        case 'ER_BAD_FIELD_ERROR': \n             const columnMatch = error.message.match(/Unknown column '(\\w+)'/);\n             const unknownColumn = columnMatch ? columnMatch[1].toLowerCase() : 'an unknown column';\n             errorMessage = `Database error: Unknown column '${unknownColumn}' in field list.`;\n             errorDetails = `The database table (possibly Requisition or RequisitionItem) is missing the column '${unknownColumn}' or it's misspelled in the query. Please ensure database migrations have been run correctly. Original DB error: ${error.message}`;\n             statusCode = 500; \n             break;\n        default:\n          break;\n      }\n    }\n    return NextResponse.json({ error: errorMessage, details: errorDetails, code: error.code || 'UNKNOWN_DB_ERROR' }, { status: statusCode });\n  } finally {\n    if (connection) connection.release();\n  }\n}\n\nexport async function GET(request: Request) {\n  const { searchParams } = new URL(request.url);\n  const month = searchParams.get('month');\n  const year = searchParams.get('year');\n  const siteId = searchParams.get('siteId'); // This will filter by Requisition.siteId (header site)\n  const requestedByUserId = searchParams.get('requestedByUserId');\n  const status = searchParams.get('status');\n  const pool = await getDbPool();\n\n  let query = `\n    SELECT \n      r.id, r.requisitionNumber, r.requisitionDate, r.requestedByName, r.status, \n      r.approverId, r.approvalDate,\n      s.name as siteName, s.siteCode, -- This is for the header site\n      u.name as requestorFullName,\n      app.name as approverName\n      -- Removed r.justification as it's no longer a header field from form\n    FROM Requisition r\n    LEFT JOIN Site s ON r.siteId = s.id -- Join for header site\n    LEFT JOIN User u ON r.requestedByUserId = u.id\n    LEFT JOIN Approver app ON r.approverId = app.id\n    WHERE 1=1\n  `;\n  const queryParams: (string | number)[] = [];\n\n  if (month && month !== 'all') {\n    query += ' AND MONTH(r.requisitionDate) = ?';\n    queryParams.push(parseInt(month, 10));\n  }\n  if (year && year !== 'all') {\n    query += ' AND YEAR(r.requisitionDate) = ?';\n    queryParams.push(parseInt(year, 10));\n  }\n  if (siteId && siteId !== 'all') { // Filters by header siteId\n    query += ' AND r.siteId = ?';\n    queryParams.push(parseInt(siteId, 10));\n  }\n  if (requestedByUserId && requestedByUserId !== 'all') {\n    query += ' AND r.requestedByUserId = ?';\n    queryParams.push(requestedByUserId);\n  }\n  if (status && status !== 'all') {\n    query += ' AND r.status = ?';\n    queryParams.push(status);\n  }\n\n  query += ' ORDER BY r.requisitionDate DESC, r.requisitionNumber DESC';\n\n  try {\n    const [rows]: any[] = await pool.execute(query, queryParams);\n    const requisitions = rows.map(row => ({\n        ...row,\n        siteName: row.siteCode || row.siteName, // Header site display\n        requestedByName: row.requestorFullName || row.requestedByName,\n        approverName: row.approverName,\n        approvalDate: safeToISOString(row.approvalDate),\n        requisitionDate: safeToISOString(row.requisitionDate),\n    }));\n    return NextResponse.json(requisitions);\n  } catch (error: any) {\n    console.error('[API_ERROR] /api/requisitions GET:', error); \n    const errorMessage = error.sqlMessage || error.message || 'An unknown database error occurred.';\n    const errorCode = error.code || 'UNKNOWN_DB_ERROR';\n    const sqlState = error.sqlState || 'N/A';\n    \n    console.error(`[API_ERROR_DETAILS] /api/requisitions GET: Code: ${errorCode}, SQL State: ${sqlState}, Message: \"${errorMessage}\"`);\n    \n    return NextResponse.json(\n      {\n        error: 'Failed to fetch requisitions due to a server-side database error.',\n        details: `Database operation failed with message: \"${errorMessage}\". Error Code: ${errorCode}. SQL State: ${sqlState}. Please check server logs for the full query and parameters if the issue persists.`,\n        code: errorCode,\n        sqlState: sqlState \n      }, \n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}