{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/backend/db.js"],"sourcesContent":["\nimport mysql from 'mysql2/promise';\nimport fs from 'fs';\nimport path from 'path';\nimport dotenv from 'dotenv';\n\n// Configure dotenv to load the .env file from the backend directory\ndotenv.config({ path: path.resolve(process.cwd(), 'backend', '.env') });\n\nlet pool = null;\n\nasync function getDbPool() {\n  if (pool) {\n    return pool;\n  }\n\n  // --- Debugging Environment ---\n  console.log('[DB_INIT] Current working directory:', process.cwd());\n  console.log('[DB_INIT] Checking for environment variables...');\n  \n  try {\n    // Check for essential DB environment variables\n    const essentialEnvVars = ['DB_HOST', 'DB_USER', 'DB_PASSWORD', 'DB_NAME'];\n    const missingEnvVars = [];\n    for (const v of essentialEnvVars) {\n        if (!process.env[v]) {\n            missingEnvVars.push(v);\n        } else {\n            // Avoid logging password in production\n            if (v !== 'DB_PASSWORD') {\n                console.log(`[DB_INIT] Found ENV VAR: ${v} = ${process.env[v]}`);\n            } else {\n                 console.log(`[DB_INIT] Found ENV VAR: DB_PASSWORD = (hidden)`);\n            }\n        }\n    }\n    \n    if (missingEnvVars.length > 0) {\n      const errorMsg = `Database configuration is incomplete. Missing variables: ${missingEnvVars.join(', ')}. Please define these in your root .env file.`;\n      console.error(`[DB_INIT_ERROR] ${errorMsg}`);\n      throw new Error(errorMsg);\n    }\n\n    // --- SSL Certificate Handling ---\n    const caCertPathOrContent = process.env.DB_SSL_CA;\n    let caCertContent;\n\n    if (caCertPathOrContent) {\n      const potentialPath = path.resolve(process.cwd(), caCertPathOrContent);\n      \n      if (fs.existsSync(potentialPath) && fs.statSync(potentialPath).isFile()) {\n        console.log(`DB_INIT_INFO: DB_SSL_CA points to a file. Reading certificate from \"${potentialPath}\".`);\n        caCertContent = fs.readFileSync(potentialPath, 'utf8');\n      } else {\n        console.log(\"DB_INIT_INFO: DB_SSL_CA does not appear to be a file path. Using its content directly for SSL connection.\");\n        caCertContent = caCertPathOrContent;\n      }\n    } else {\n      console.warn(`DB_WARN: The DB_SSL_CA environment variable is not set. Connecting with SSL using system default CAs. If connection fails, please provide the path to your 'ca.pem' file in the DB_SSL_CA variable in your .env file.`);\n    }\n    \n    const sslConfig = { rejectUnauthorized: true, ca: caCertContent || undefined };\n\n    // --- Connection Pool Creation ---\n    console.log(\"DB_INIT_INFO: Creating database connection pool for the first time.\");\n    const newPool = mysql.createPool({\n      host: process.env.DB_HOST,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD,\n      database: process.env.DB_NAME,\n      port: process.env.DB_PORT ? parseInt(process.env.DB_PORT, 10) : 3306,\n      ssl: sslConfig,\n      waitForConnections: true,\n      connectionLimit: 10,\n      queueLimit: 0,\n    });\n\n    try {\n      // Test the connection before assigning it to the singleton\n      const connection = await newPool.getConnection();\n      console.log(\"DB_INIT_SUCCESS: Database connection pool created and verified successfully.\");\n      connection.release();\n    } catch (testError) {\n      console.error(\"CRITICAL_DB_INIT_ERROR: Failed to get a connection from the pool after creation.\", testError);\n      // Destroy the pool if the initial connection test fails\n      newPool.end();\n      throw testError; // Re-throw to be caught by the main catch block\n    }\n\n    pool = newPool;\n    return pool;\n\n  } catch (error) {\n    console.error(`CRITICAL_DB_INIT_ERROR: Failed to create and verify database connection pool. Error: ${error.message}`);\n    // Re-throw the error to be caught by the calling API route\n    throw error;\n  }\n}\n\n// Export the function that provides the pool\nexport { getDbPool };\n"],"names":[],"mappings":";;;AACA;AACA;AACA;AACA;;;;;AAEA,oEAAoE;AACpE,uIAAA,CAAA,UAAM,CAAC,MAAM,CAAC;IAAE,MAAM,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,WAAW;AAAQ;AAErE,IAAI,OAAO;AAEX,eAAe;IACb,IAAI,MAAM;QACR,OAAO;IACT;IAEA,gCAAgC;IAChC,QAAQ,GAAG,CAAC,wCAAwC,QAAQ,GAAG;IAC/D,QAAQ,GAAG,CAAC;IAEZ,IAAI;QACF,+CAA+C;QAC/C,MAAM,mBAAmB;YAAC;YAAW;YAAW;YAAe;SAAU;QACzE,MAAM,iBAAiB,EAAE;QACzB,KAAK,MAAM,KAAK,iBAAkB;YAC9B,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE,EAAE;gBACjB,eAAe,IAAI,CAAC;YACxB,OAAO;gBACH,uCAAuC;gBACvC,IAAI,MAAM,eAAe;oBACrB,QAAQ,GAAG,CAAC,CAAC,yBAAyB,EAAE,EAAE,GAAG,EAAE,QAAQ,GAAG,CAAC,EAAE,EAAE;gBACnE,OAAO;oBACF,QAAQ,GAAG,CAAC,CAAC,+CAA+C,CAAC;gBAClE;YACJ;QACJ;QAEA,IAAI,eAAe,MAAM,GAAG,GAAG;YAC7B,MAAM,WAAW,CAAC,yDAAyD,EAAE,eAAe,IAAI,CAAC,MAAM,6CAA6C,CAAC;YACrJ,QAAQ,KAAK,CAAC,CAAC,gBAAgB,EAAE,UAAU;YAC3C,MAAM,IAAI,MAAM;QAClB;QAEA,mCAAmC;QACnC,MAAM,sBAAsB,QAAQ,GAAG,CAAC,SAAS;QACjD,IAAI;QAEJ,IAAI,qBAAqB;YACvB,MAAM,gBAAgB,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI;YAElD,IAAI,6FAAA,CAAA,UAAE,CAAC,UAAU,CAAC,kBAAkB,6FAAA,CAAA,UAAE,CAAC,QAAQ,CAAC,eAAe,MAAM,IAAI;gBACvE,QAAQ,GAAG,CAAC,CAAC,oEAAoE,EAAE,cAAc,EAAE,CAAC;gBACpG,gBAAgB,6FAAA,CAAA,UAAE,CAAC,YAAY,CAAC,eAAe;YACjD,OAAO;gBACL,QAAQ,GAAG,CAAC;gBACZ,gBAAgB;YAClB;QACF,OAAO;YACL,QAAQ,IAAI,CAAC,CAAC,qNAAqN,CAAC;QACtO;QAEA,MAAM,YAAY;YAAE,oBAAoB;YAAM,IAAI,iBAAiB;QAAU;QAE7E,mCAAmC;QACnC,QAAQ,GAAG,CAAC;QACZ,MAAM,UAAU,mIAAA,CAAA,UAAK,CAAC,UAAU,CAAC;YAC/B,MAAM,QAAQ,GAAG,CAAC,OAAO;YACzB,MAAM,QAAQ,GAAG,CAAC,OAAO;YACzB,UAAU,QAAQ,GAAG,CAAC,WAAW;YACjC,UAAU,QAAQ,GAAG,CAAC,OAAO;YAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,GAAG,SAAS,QAAQ,GAAG,CAAC,OAAO,EAAE,MAAM;YAChE,KAAK;YACL,oBAAoB;YACpB,iBAAiB;YACjB,YAAY;QACd;QAEA,IAAI;YACF,2DAA2D;YAC3D,MAAM,aAAa,MAAM,QAAQ,aAAa;YAC9C,QAAQ,GAAG,CAAC;YACZ,WAAW,OAAO;QACpB,EAAE,OAAO,WAAW;YAClB,QAAQ,KAAK,CAAC,oFAAoF;YAClG,wDAAwD;YACxD,QAAQ,GAAG;YACX,MAAM,WAAW,gDAAgD;QACnE;QAEA,OAAO;QACP,OAAO;IAET,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,qFAAqF,EAAE,MAAM,OAAO,EAAE;QACrH,2DAA2D;QAC3D,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/tags/route.ts"],"sourcesContent":["\nimport { NextResponse } from 'next/server';\nimport { getDbPool } from '../../../../backend/db.js';\nimport type { Tag, Site, TagStatus } from '@/types';\nimport csv from 'csv-parser';\nimport { Readable } from 'stream';\nimport { randomUUID } from 'crypto';\n\nconst tagStatuses: TagStatus[] = ['Active', 'Inactive', 'Under Maintenance', 'Sold', 'Decommissioned'];\n\nexport async function GET() {\n  try {\n    const pool = await getDbPool();\n    const query = `\n      SELECT \n        t.id, t.tagNumber, t.registration, t.make, t.model, \n        t.tankCapacity, t.year, t.chassisNo, t.type, t.siteId,\n        t.status, \n        t.createdAt, t.updatedAt, \n        s.siteCode AS siteName \n      FROM Tag t\n      LEFT JOIN Site s ON t.siteId = s.id\n      ORDER BY t.tagNumber ASC;\n    `;\n    const [rows] = await pool.execute(query);\n    return NextResponse.json(rows);\n  } catch (error: any) {\n    console.error('Error fetching tags:', error);\n    return NextResponse.json({ error: 'Failed to fetch tags', details: error.message }, { status: 500 });\n  }\n}\n\nexport async function POST(request: Request) {\n  const contentType = request.headers.get('content-type');\n  const pool = await getDbPool();\n\n  if (contentType && contentType.includes('multipart/form-data')) {\n    console.log('[API_INFO] /api/tags POST: Received multipart/form-data request for CSV upload.');\n    let connection;\n    try {\n      const formData = await request.formData();\n      const file = formData.get('file') as File | null;\n      \n      if (!file) {\n        console.error('[API_ERROR] /api/tags POST CSV: No file found in formData.');\n        return NextResponse.json({ error: 'No file uploaded' }, { status: 400 });\n      }\n      console.log(`[API_INFO] /api/tags POST CSV: Received file: ${file.name}, size: ${file.size}, type: ${file.type}`);\n      \n      const fileBuffer = Buffer.from(await file.arrayBuffer());\n      const results: any[] = [];\n      const stream = Readable.from(fileBuffer);\n      let firstRecordLogged = false;\n\n      console.log('[API_INFO] /api/tags POST CSV: Starting CSV parsing...');\n      await new Promise<void>((resolve, reject) => {\n        stream\n          .pipe(csv({\n            mapHeaders: ({ header }) => header.trim().toLowerCase() // Trim and lowercase headers for consistency\n          }))\n          .on('headers', (headers) => {\n            console.log('[API_INFO] /api/tags POST CSV: Detected CSV Headers (lowercased):', headers);\n          })\n          .on('data', (data) => {\n            if (!firstRecordLogged) {\n              console.log('[API_DEBUG] /api/tags POST CSV: First parsed data record from CSV:', data);\n              firstRecordLogged = true;\n            }\n            results.push(data);\n          })\n          .on('end', () => {\n            console.log(`[API_INFO] /api/tags POST CSV: CSV parsing finished. ${results.length} records found.`);\n            resolve();\n          })\n          .on('error', (parseError) => {\n            console.error('[API_ERROR] /api/tags POST CSV: Error during CSV parsing:', parseError);\n            reject(parseError);\n          });\n      });\n\n      if (results.length === 0) {\n        console.warn('[API_WARN] /api/tags POST CSV: CSV file is empty or could not be parsed into records.');\n        return NextResponse.json({ message: 'CSV file is empty or yielded no records.' }, { status: 400 });\n      }\n\n      connection = await pool.getConnection();\n      console.log('[API_INFO] /api/tags POST CSV: Database connection obtained for batch insert/update.');\n      await connection.beginTransaction();\n      console.log('[API_INFO] /api/tags POST CSV: Started database transaction.');\n\n      let successfulImports = 0;\n      let failedImports = 0;\n      const importErrors: string[] = [];\n\n      for (const [index, record] of results.entries()) {\n        // Consistent header access (all lowercase due to mapHeaders)\n        const tagId = record.id || record.tagid || randomUUID(); // Use provided ID or generate new one\n        const tagNumber = record.tagnumber || record['tag number'];\n\n        if (!tagNumber) {\n          failedImports++;\n          const errorMsg = `Skipped record #${index + 1} (ID: ${tagId}): Tag Number is required. Record data: ${JSON.stringify(record)}`;\n          console.warn(`[API_WARN] /api/tags POST CSV: ${errorMsg}`);\n          importErrors.push(errorMsg);\n          continue;\n        }\n\n        const registration = record.registration || null;\n        const make = record.make || null;\n        const model = record.model || null;\n        const tankCapacity = record.tankcapacity || record['tank capacity'] ? parseInt(record.tankcapacity || record['tank capacity'], 10) : null;\n        const year = record.year ? parseInt(record.year, 10) : null;\n        const chassisNo = record.chassisno || record['chassis no.'] || null;\n        const type = record.type || null;\n        const siteId = record.siteid || record['site id'] ? parseInt(record.siteid || record['site id'], 10) : null;\n        \n        let status = (record.status || 'Active') as TagStatus;\n        if (!tagStatuses.includes(status)) {\n            console.warn(`[API_WARN] /api/tags POST CSV: Invalid status \"${status}\" for Tag ID ${tagId}. Defaulting to 'Active'.`);\n            status = 'Active';\n        }\n\n        console.log(`[API_DEBUG] /api/tags POST CSV: Processing record #${index + 1}: ID=${tagId}, TagNumber=${tagNumber}, Status=${status}`);\n\n        try {\n          const query = `\n            INSERT INTO Tag (id, tagNumber, registration, make, model, tankCapacity, year, chassisNo, type, status, siteId, createdAt, updatedAt)\n            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())\n            ON DUPLICATE KEY UPDATE\n              tagNumber = VALUES(tagNumber), registration = VALUES(registration), make = VALUES(make), model = VALUES(model),\n              tankCapacity = VALUES(tankCapacity), year = VALUES(year), chassisNo = VALUES(chassisNo), type = VALUES(type),\n              status = VALUES(status), siteId = VALUES(siteId), updatedAt = NOW();\n          `;\n          await connection.execute(query, [\n            tagId, tagNumber, registration, make, model, \n            isNaN(tankCapacity as any) ? null : tankCapacity, \n            isNaN(year as any) ? null : year, \n            chassisNo, type, status, \n            isNaN(siteId as any) ? null : siteId\n          ]);\n          successfulImports++;\n        } catch (dbError: any) {\n          failedImports++;\n          const errorMsg = `Failed to process record #${index + 1} (ID ${tagId}, TagNumber: ${tagNumber}): ${dbError.message}. SQL Error Code: ${dbError.code || 'N/A'}.`;\n          console.error(`[API_ERROR] /api/tags POST CSV: Database error for record: ${errorMsg}`, dbError);\n          importErrors.push(errorMsg);\n        }\n      }\n\n      await connection.commit();\n      console.log('[API_INFO] /api/tags POST CSV: Database transaction committed.');\n      \n      let message = `${successfulImports} tag(s) processed successfully from CSV.`;\n      if (failedImports > 0) {\n        message += ` ${failedImports} tag(s) failed.`;\n      }\n      console.log(`[API_INFO] /api/tags POST CSV: Final processing result - ${message}`);\n      if (importErrors.length > 0) {\n        console.warn('[API_WARN] /api/tags POST CSV: Errors encountered during processing:', importErrors);\n      }\n\n      return NextResponse.json({ \n        message, \n        processed: successfulImports,\n        failed: failedImports,\n        errors: importErrors.length > 0 ? importErrors : undefined \n      }, { status: importErrors.length > 0 && successfulImports === 0 ? 400 : 200 });\n\n\n    } catch (error: any) {\n      if (connection) {\n        try { await connection.rollback(); console.log('[API_INFO] /api/tags POST CSV: Database transaction rolled back due to error.'); }\n        catch (rbError) { console.error('[API_ERROR] /api/tags POST CSV: Error during transaction rollback:', rbError); }\n      }\n      console.error('[API_ERROR] /api/tags POST CSV (outer try-catch):', error);\n      return NextResponse.json({ error: 'Failed to handle tag CSV upload.', details: error.message }, { status: 500 });\n    } finally {\n      if (connection) {\n        try { connection.release(); console.log('[API_INFO] /api/tags POST CSV: Database connection released.'); }\n        catch (relError) { console.error('[API_ERROR] /api/tags POST CSV: Error releasing connection:', relError); }\n      }\n    }\n\n  } else if (contentType && contentType.includes('application/json')) {\n    console.log('[API_INFO] /api/tags POST: Received application/json request.');\n    try {\n      const tagData = await request.json() as Omit<Tag, 'createdAt' | 'updatedAt' | 'siteName'>;\n\n      if (!tagData.id || !tagData.tagNumber) {\n        return NextResponse.json({ error: 'Tag ID and Tag Number are required.' }, { status: 400 });\n      }\n      \n      let status = tagData.status || 'Active';\n      if (!tagStatuses.includes(status)) {\n          console.warn(`[API_WARN] /api/tags POST JSON: Invalid status \"${status}\" for Tag ID ${tagData.id}. Defaulting to 'Active'.`);\n          status = 'Active';\n      }\n\n      const query = `\n        INSERT INTO Tag (id, tagNumber, registration, make, model, tankCapacity, year, chassisNo, type, siteId, status, createdAt, updatedAt)\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())\n      `;\n      await pool.execute(query, [\n        tagData.id,\n        tagData.tagNumber,\n        tagData.registration || null,\n        tagData.make || null,\n        tagData.model || null,\n        tagData.tankCapacity ? Number(tagData.tankCapacity) : null,\n        tagData.year ? Number(tagData.year) : null,\n        tagData.chassisNo || null,\n        tagData.type || null,\n        tagData.siteId ? Number(tagData.siteId) : null,\n        status,\n      ]);\n\n      const [newTagRows]: any[] = await pool.execute('SELECT t.*, s.siteCode as siteName FROM Tag t LEFT JOIN Site s ON t.siteId = s.id WHERE t.id = ?', [tagData.id]);\n      if (newTagRows.length === 0) {\n          return NextResponse.json({ error: 'Tag created but failed to retrieve.' }, { status: 500 });\n      }\n      return NextResponse.json(newTagRows[0], { status: 201 });\n\n    } catch (error: any) {\n      console.error('[API_ERROR] /api/tags POST JSON: Error creating tag:', error);\n      if (error.code === 'ER_DUP_ENTRY') {\n        return NextResponse.json({ error: 'Tag with this ID or Tag Number already exists.' }, { status: 409 });\n      }\n      return NextResponse.json({ error: 'Failed to create tag (JSON)', details: error.message }, { status: 500 });\n    }\n  } else {\n    console.warn(`[API_WARN] /api/tags POST: Unsupported Content-Type: ${contentType}`);\n    return NextResponse.json({ error: 'Unsupported Content-Type' }, { status: 415 });\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}